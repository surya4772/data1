CodeMirror.defineMode("coffeescript",function(n){function g(a){return new RegExp("^(("+a.join(")|(")+"))\\b")}function f(a,b){if(a.sol()){null===b.scope.align&&(b.scope.align=!1);var c=b.scope.offset;if(a.eatSpace()){var d=a.indentation();return d>c&&"coffee"==b.scope.type?"indent":d<c?"dedent":null}0<c&&l(a,b)}if(a.eatSpace())return null;c=a.peek();if(a.match("####"))return a.skipToEnd(),"comment";if(a.match("###"))return b.tokenize=r,b.tokenize(a,b);if("#"===c)return a.skipToEnd(),"comment";if(a.match(/^-?[0-9\.]/,
!1)){c=!1;a.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&(c=!0);a.match(/^-?\d+\.\d*/)&&(c=!0);a.match(/^-?\.\d+/)&&(c=!0);if(c)return"."==a.peek()&&a.backUp(1),"number";c=!1;a.match(/^-?0x[0-9a-f]+/i)&&(c=!0);a.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(c=!0);a.match(/^-?0(?![\dx])/i)&&(c=!0);if(c)return"number"}if(a.match(s))return b.tokenize=p(a.current(),"string"),b.tokenize(a,b);if(a.match(t)){if("/"!=a.current()||a.match(/^.*\//,!1))return b.tokenize=p(a.current(),"string-2"),b.tokenize(a,b);a.backUp(1)}if(a.match(u)||
a.match(v))return"operator";if(a.match(w))return"punctuation";if(a.match(x))return"atom";if(a.match(y))return"keyword";if(a.match(z))return"variable";if(a.match(A))return"property";a.next();return h}function p(a,b){var c=1==a.length;return function(d,e){for(;!d.eol();)if(d.eatWhile(/[^'"\/\\]/),d.eat("\\")){if(d.next(),c&&d.eol())return b}else{if(d.match(a))return e.tokenize=f,b;d.eat(/['"\/]/)}c&&(n.mode.singleLineStringErrors?b=h:e.tokenize=f);return b}}function r(a,b){for(;!a.eol();){a.eatWhile(/[^#]/);
if(a.match("###")){b.tokenize=f;break}a.eatWhile("#")}return"comment"}function m(a,b,c){c=c||"coffee";for(var d=0,e=!1,q=null,f=b.scope;f;f=f.prev)if("coffee"===f.type){d=f.offset+n.indentUnit;break}"coffee"!==c?(e=null,q=a.column()+a.current().length):b.scope.align&&(b.scope.align=!1);b.scope={offset:d,type:c,prev:b.scope,align:e,alignOffset:q}}function l(a,b){if(b.scope.prev){if("coffee"===b.scope.type){for(var c=a.indentation(),d=!1,e=b.scope;e;e=e.prev)if(c===e.offset){d=!0;break}if(!d)return!0;
for(;b.scope.prev&&b.scope.offset!==c;)b.scope=b.scope.prev}else b.scope=b.scope.prev;return!1}}var h="error",u=/^(?:->|=>|\+[+=]?|-[\-=]?|\*[\*=]?|\/[\/=]?|[=!]=|<[><]?=?|>>?=?|%=?|&=?|\|=?|\^=?|\~|!|\?)/,w=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/,z=/^[_A-Za-z$][_A-Za-z$0-9]*/,A=/^(@|this\.)[_A-Za-z$][_A-Za-z$0-9]*/,v=g("and or not is isnt in instanceof typeof".split(" ")),k="for while loop if unless else switch try catch finally class".split(" "),y=g(k.concat("break by continue debugger delete do in of new return then this throw when until".split(" "))),
k=g(k),s=/^('{3}|\"{3}|['\"])/,t=/^(\/{3}|\/)/,x=g("Infinity NaN undefined null true false on off yes no".split(" "));return{startState:function(a){return{tokenize:f,scope:{offset:a||0,type:"coffee",prev:null,align:!1},lastToken:null,lambda:!1,dedent:0}},token:function(a,b){var c=null===b.scope.align&&b.scope;c&&a.sol()&&(c.align=!1);var d;d=b.tokenize(a,b);var e=a.current();if("."===e)b.tokenize(a,b),e=a.current(),d=/^\.[\w$]+$/.test(e)?"variable":h;else{"return"===e&&(b.dedent+=1);("->"!==e&&"=>"!==
e||b.lambda||a.peek())&&"indent"!==d||m(a,b);var f="[({".indexOf(e);-1!==f&&m(a,b,"])}".slice(f,f+1));k.exec(e)&&m(a,b);"then"==e&&l(a,b);if("dedent"===d&&l(a,b))d=h;else{f="])}".indexOf(e);if(-1!==f){for(;"coffee"==b.scope.type&&b.scope.prev;)b.scope=b.scope.prev;b.scope.type==e&&(b.scope=b.scope.prev)}0<b.dedent&&a.eol()&&"coffee"==b.scope.type&&(b.scope.prev&&(b.scope=b.scope.prev),b.dedent-=1)}}c&&d&&"comment"!=d&&(c.align=!0);b.lastToken={style:d,content:a.current()};a.eol()&&a.lambda&&(b.lambda=
!1);return d},indent:function(a,b){if(a.tokenize!=f)return 0;var c=a.scope,d=b&&-1<"])}".indexOf(b.charAt(0));if(d)for(;"coffee"==c.type&&c.prev;)c=c.prev;d=d&&c.type===b.charAt(0);return c.align?c.alignOffset-(d?1:0):(d?c.prev:c).offset},lineComment:"#",fold:"indent"}});CodeMirror.defineMIME("text/x-coffeescript","coffeescript");
